<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        function MyPromise(func) {
            // 封装 Promise
            this.status = 'pennding';
            func(this.wrapResolved.bind(bind) , this.wrapRejected.bind(this))
        }

        MyPromise.prototype.resolve = function(val){
            if(this.status == "pennding"){
                this.status = "fulfilled";
                this.resolveValue = val
            }
        }
        
        MyPromise.prototype.reject = function(val){
            if(this.status == "pennding"){
                this.status = "rejected";
                this.rejectValue = val
            }
        }
        MyPromise.prototype.then = function(resolve,reject){
            let inter = setInterval(() => {
                if(this.status == "padding"){
                    return 
                }

                clearInterval(inter)
                
                if(this.status == "fulfilled"){
                    resolve(this.resolveValue)
                }else if(this.status == "rejected"){
                    reject(this.rejectValue)
                }
            }, 100);
        }

        // MyPromise.prototype.wrapResolved = function (val) {
        //     if (this.status == 'pennding') {
        //         this.status = "fulfilled";
        //         setTimeout(() => {
        //             this.resolve && this.resolve(val)
        //         })
        //     }
        // }

        // MyPromise.prototype.wrapRejected = function (val) {
        //     if (this.status == 'pennding') {
        //         this.status = "rejected";
        //         setTimeout(() => {
        //             this.reject && this.reject(val)
        //         })
        //     }
        // }

        // MyPromise.prototype.then = function (resolve, reject) {
        //     this.resolve = resolve || function () {};
        //     this.reject = reject || function () {};
        // }

    </script>
</body>

</html>
